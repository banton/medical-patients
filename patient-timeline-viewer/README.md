# Patient Timeline Viewer

A React-based visualizer for military medical evacuation patient flow. This application loads patient data from JSON files and provides an animated timeline showing patient movement through medical facilities (POI → Role1 → Role2 → Role3 → Role4).

## Features

- **Interactive Timeline**: Play, pause, and control playback speed of patient movement
- **Real-time Visualization**: Watch patients move between facilities with smooth animations
- **Patient Status Tracking**: Visual indicators for KIA, RTD, and active patients
- **Facility Overview**: 5-column layout showing all medical evacuation levels
- **File Upload**: Drag-and-drop interface for loading patients.json files
- **Statistics Dashboard**: Real-time counts and status summaries

## Tech Stack

- **React 18** with TypeScript
- **Vite** for fast development and building
- **Tailwind CSS** for styling
- **Framer Motion** for smooth animations
- **Modern ES6+** with full type safety

## Getting Started

### Prerequisites

- Node.js 18+ 
- npm or yarn

### Installation

```bash
# Navigate to the project directory
cd patient-timeline-viewer

# Install dependencies
npm install

# Start development server
npm run dev
```

The application will be available at `http://localhost:5174`

### Building for Production

```bash
npm run build
npm run preview
```

## Usage

1. **Load Patient Data**: 
   - Generate patient data from the main medical patients generator
   - Download the resulting `patients.json` file
   - Upload it using the drag-and-drop interface

2. **Timeline Controls**:
   - **Play/Pause**: Start and stop the timeline animation
   - **Speed Control**: Adjust playback speed (0.5x to 60x)
   - **Reset**: Return to the beginning of the timeline
   - **Seek**: Click on the progress bar to jump to specific times

3. **Patient Visualization**:
   - Patients appear as cards in facility columns
   - Color coding indicates triage category (T1=Red, T2=Yellow, T3=Green)
   - Status indicators show KIA (red), RTD (green), or active (blue)
   - Animations show transit between facilities

## Patient Data Format

The application expects JSON files with the following structure:

```json
[
  {
    "id": "string",
    "nationality": "string",
    "triage_category": "T1" | "T2" | "T3",
    "final_status": "KIA" | "RTD" | "Remains_Role4",
    "injury_timestamp": "ISO 8601 datetime",
    "movement_timeline": [
      {
        "event_type": "arrival" | "evacuation_start" | "transit_start" | "kia" | "rtd",
        "facility": "POI" | "Role1" | "Role2" | "Role3" | "Role4",
        "timestamp": "ISO 8601 datetime",
        "hours_since_injury": number,
        "evacuation_duration_hours": number,
        "transit_duration_hours": number
      }
    ]
  }
]
```

## Project Structure

```
patient-timeline-viewer/
├── src/
│   ├── components/
│   │   ├── PatientCard.tsx       # Individual patient display
│   │   ├── FacilityColumn.tsx    # Medical facility container
│   │   ├── TimelineControls.tsx  # Playback controls
│   │   └── FileUploader.tsx      # File upload interface
│   ├── types/
│   │   └── patient.types.ts      # TypeScript definitions
│   ├── utils/
│   │   └── timelineEngine.ts     # Timeline calculation logic
│   ├── App.tsx                   # Main application
│   └── main.tsx                  # Application entry point
├── public/
│   └── sample-patients.json      # Example data file
└── README.md
```

## Key Components

### TimelineEngine
Calculates patient locations at any given time based on their movement timeline. Handles complex scenarios like evacuation periods, transit times, and terminal events (KIA/RTD).

### PatientCard
Animated patient representation with:
- Triage category color coding
- Status indicators and animations
- Nationality and injury type display
- Smooth layout transitions

### FacilityColumn
Medical facility representation showing:
- Facility metadata and descriptions
- Patient count and status summaries
- Organized patient display with animations

## Sample Data

A sample `patients.json` file is included in the `public/` directory demonstrating:
- Multiple triage categories (T1, T2, T3)
- Various patient outcomes (KIA, RTD, Remains)
- Complex movement timelines
- Different injury types and nationalities

## Integration

This visualizer is designed to work with patient data generated by the main Medical Patients Generator application. It serves as a separate, standalone tool for visualizing patient flow without affecting the main application's functionality.

## Development

The application follows React best practices with:
- TypeScript for type safety
- Component-based architecture
- Custom hooks for state management
- Efficient re-rendering with useMemo
- Smooth animations with Framer Motion

## Browser Support

Modern browsers supporting ES6+ features:
- Chrome 80+
- Firefox 72+
- Safari 13+
- Edge 80+